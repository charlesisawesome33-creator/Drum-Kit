<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Drum Hustle â€” Multiple Kits</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
:root{--bg:#0b0c10;--accent:#ffcd4a;}
html,body{margin:0;padding:0;height:100%;background:#0b0c10;font-family:sans-serif;color:#fff;display:flex;align-items:flex-start;justify-content:center;flex-direction:column;}
.kit{position:relative;width:800px;height:400px;background:#121219;border-radius:20px;box-shadow:0 0 40px rgba(0,0,0,0.6);margin-top:20px;}
.drum{position:absolute;width:80px;height:80px;border-radius:50%;background:#111214;display:flex;align-items:center;justify-content:center;color:var(--accent);font-weight:bold;cursor:pointer;border:2px solid rgba(255,255,255,0.05);user-select:none;transition:transform 0.1s;}
.drum:active{transform:scale(0.95);}
#kick{width:120px;height:120px;bottom:40px;left:340px;}
#snare{bottom:160px;left:340px;}
#hihat{bottom:200px;left:200px;}
#tom1{bottom:220px;left:320px;}
#tom2{bottom:220px;left:400px;}
#floorTom{bottom:140px;left:460px;}
#crash{bottom:300px;left:200px;}
#ride{bottom:300px;left:480px;}
.meter{position:absolute;bottom:10px;left:10px;width:780px;height:12px;background:rgba(255,255,255,0.05);border-radius:6px;overflow:hidden;}
.meter .fill{height:100%;width:0%;background:linear-gradient(90deg,var(--accent),#ff7b7b);}
#kitSelect{margin-top:10px;background:#111214;color:#fff;border:1px solid rgba(255,255,255,0.1);padding:6px;border-radius:6px;}
</style>
</head>
<body>

<select id="kitSelect">
  <option value="acoustic">Acoustic Kit</option>
  <option value="electronic">Electronic Kit</option>
  <option value="jazz">Jazz Kit</option>
</select>

<div class="kit">
  <div class="drum" id="kick">Kick (Z)</div>
  <div class="drum" id="snare">Snare (X)</div>
  <div class="drum" id="hihat">Hi-Hat (C)</div>
  <div class="drum" id="tom1">Tom1 (V)</div>
  <div class="drum" id="tom2">Tom2 (B)</div>
  <div class="drum" id="floorTom">Floor (A)</div>
  <div class="drum" id="crash">Crash (S)</div>
  <div class="drum" id="ride">Ride (D)</div>
  <div class="meter"><div class="fill" id="perfFill"></div></div>
</div>

<script>
const AudioContext = window.AudioContext || window.webkitAudioContext;
const audioCtx = new AudioContext();
function now(){ return audioCtx.currentTime; }
const perfFill=document.getElementById('perfFill');
let performance=0;

// ----------------- Drum Synth Functions -----------------
function createKick(freq,t,gainVal=1){
  const o = audioCtx.createOscillator();
  const g = audioCtx.createGain();
  o.type='sine';
  o.frequency.setValueAtTime(freq,t);
  o.frequency.exponentialRampToValueAtTime(50,t+0.3);
  g.gain.setValueAtTime(gainVal,t);
  g.gain.exponentialRampToValueAtTime(0.001,t+0.5);
  o.connect(g); g.connect(audioCtx.destination);
  o.start(t); o.stop(t+0.6);
}
function createSnare(t,gainVal=0.7){
  const buffer = audioCtx.createBuffer(1,audioCtx.sampleRate*0.2,audioCtx.sampleRate);
  const data = buffer.getChannelData(0);
  for(let i=0;i<data.length;i++) data[i]=(Math.random()*2-1)*Math.exp(-i/data.length*6);
  const noise = audioCtx.createBufferSource();
  noise.buffer=buffer;
  const filter = audioCtx.createBiquadFilter(); filter.type='highpass'; filter.frequency.value=1000;
  const g = audioCtx.createGain(); g.gain.setValueAtTime(gainVal,t); g.gain.exponentialRampToValueAtTime(0.001,t+0.2);
  noise.connect(filter); filter.connect(g); g.connect(audioCtx.destination); noise.start(t);
  const o = audioCtx.createOscillator(); o.type='triangle'; o.frequency.setValueAtTime(200,t);
  const og = audioCtx.createGain(); og.gain.setValueAtTime(gainVal*0.6,t); og.gain.exponentialRampToValueAtTime(0.001,t+0.15);
  o.connect(og); og.connect(audioCtx.destination); o.start(t); o.stop(t+0.18);
}
function createHiHat(t,gainVal=0.5){
  const buffer=audioCtx.createBuffer(1,audioCtx.sampleRate*0.06,audioCtx.sampleRate);
  const data=buffer.getChannelData(0);
  for(let i=0;i<data.length;i++) data[i]=(Math.random()*2-1)*Math.exp(-i/data.length*8);
  const src = audioCtx.createBufferSource(); src.buffer=buffer;
  const f = audioCtx.createBiquadFilter(); f.type='highpass'; f.frequency.value=5000;
  const g = audioCtx.createGain(); g.gain.setValueAtTime(gainVal,t); g.gain.exponentialRampToValueAtTime(0.001,t+0.06);
  src.connect(f); f.connect(g); g.connect(audioCtx.destination); src.start(t);
}
function createTom(freq,t,gainVal=0.8){
  const o=audioCtx.createOscillator(); const g=audioCtx.createGain();
  o.type='sine'; o.frequency.setValueAtTime(freq,t); o.frequency.exponentialRampToValueAtTime(freq*0.6,t+0.25);
  g.gain.setValueAtTime(gainVal,t); g.gain.exponentialRampToValueAtTime(0.001,t+0.35);
  o.connect(g); g.connect(audioCtx.destination); o.start(t); o.stop(t+0.5);
}
function createCymbal(t,gainVal=0.7,duration=0.6){
  const buffer = audioCtx.createBuffer(1,audioCtx.sampleRate*duration,audioCtx.sampleRate);
  const data = buffer.getChannelData(0);
  for(let i=0;i<data.length;i++) data[i]=(Math.random()*2-1)*Math.exp(-i/data.length*3);
  const src = audioCtx.createBufferSource(); src.buffer=buffer;
  const g = audioCtx.createGain(); g.gain.setValueAtTime(gainVal,t); g.gain.exponentialRampToValueAtTime(0.001,t+duration);
  src.connect(g); g.connect(audioCtx.destination); src.start(t);
}

// ----------------- Drum Kits -----------------
const DRUM_KITS = {
  acoustic:{
    kick:t=>createKick(150,t,1),
    snare:t=>createSnare(t,0.7),
    hihat:t=>createHiHat(t,0.5),
    tom1:t=>createTom(240,t,0.8),
    tom2:t=>createTom(200,t,0.8),
    floorTom:t=>createTom(160,t,0.9),
    crash:t=>createCymbal(t,0.8,0.8),
    ride:t=>createCymbal(t,0.7,0.6)
  },
  electronic:{
    kick:t=>createKick(200,t,1.2),
    snare:t=>createSnare(t,1),
    hihat:t=>createHiHat(t,0.8),
    tom1:t=>createTom(300,t,1),
    tom2:t=>createTom(250,t,1),
    floorTom:t=>createTom(180,t,1),
    crash:t=>createCymbal(t,1,0.5),
    ride:t=>createCymbal(t,0.9,0.5)
  },
  jazz:{
    kick:t=>createKick(100,t,0.6),
    snare:t=>createSnare(t,0.5),
    hihat:t=>createHiHat(t,0.4),
    tom1:t=>createTom(200,t,0.6),
    tom2:t=>createTom(180,t,0.6),
    floorTom:t=>createTom(140,t,0.7),
    crash:t=>createCymbal(t,0.5,0.6),
    ride:t=>createCymbal(t,0.5,0.6)
  }
};

let currentKit = 'acoustic';

// ----------------- Handle Hits -----------------
function handleHit(drum){
  if(audioCtx.state==='suspended') audioCtx.resume();
  const t = now();
  if(DRUM_KITS[currentKit][drum]) DRUM_KITS[currentKit][drum](t);
  performance=Math.min(100,performance+10);
  perfFill.style.width = performance+'%';
}

// Mouse clicks
document.querySelectorAll('.drum').forEach(d=>d.onclick=()=>handleHit(d.id));

// Keyboard mapping
const keyMap = {z:'kick',x:'snare',c:'hihat',v:'tom1',b:'tom2',a:'floorTom',s:'crash',d:'ride'};
document.addEventListener('keydown',e=>{ if(keyMap[e.key]) handleHit(keyMap[e.key]); });

// Kit select
document.getElementById('kitSelect').addEventListener('change',e=>{
  currentKit=e.target.value;
});

// Unlock audio on first interaction
window.addEventListener('pointerdown',()=>{ if(audioCtx.state==='suspended') audioCtx.resume(); },{once:true});
</script>
</body>
</html>
